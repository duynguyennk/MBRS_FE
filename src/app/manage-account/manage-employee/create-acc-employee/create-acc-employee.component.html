<loading *ngIf="isLoading">{{ isLoading }}</loading>
<main class="container">
  <div class="w-form-60">
    <p class="fm-title">
      Tạo Tài Khoản Nhân Viên
    </p>
    <!-- icon separator-line -->
    <hr>
    <p class="remind">Điền thông tin Nhân Viên Vào Phía Dưới</p>
    <!-- form create employee -->
    <div class="fm-border-60">
      <form [formGroup]="employeeForm" (ngSubmit)="onSubmit()">
        <div class="form-group mb-4">
          <label for="fullName" class="title-input"><span class="color-red">*</span> Họ Và Tên
          </label>
          <input formControlName="fullName" [ngClass]="{
              'is-invalid': submitted && employeeForm.controls.fullName.errors
            }" minlength="2" maxlength="50" type="text" class="form-control"
            placeholder="VD: Đinh Văn Bình" />
          <div *ngIf="submitted && employeeForm.controls.fullName.errors" class="text-danger">
            <div *ngIf="employeeForm.controls.fullName.errors.required">
              {{ isEmpty }}
            </div>
            <div *ngIf="employeeForm.controls.fullName.errors.minlength">
              {{ atLeast2C }}
            </div>
            <div *ngIf="employeeForm.controls.fullName.errors.pattern">
              {{ isLetter }}
            </div>
          </div>
        </div>
        <div class="form-group mb-4">
          <label for="userName" class="title-input"><span class="color-red">*</span> Tên Tài Khoản </label>
          <input formControlName="userName" [ngClass]="{
              'is-invalid': submitted && employeeForm.controls.userName.errors
            }" minlength="2" maxlength="50" type="text" class="form-control"
            placeholder="VD: binhdv2911" />
          <div *ngIf="submitted && employeeForm.controls.userName.errors" class="text-danger">
            <div *ngIf="employeeForm.controls.userName.errors.required">
              {{ isEmpty }}
            </div>
            <div *ngIf="employeeForm.controls.userName.errors.minlength">
              {{ atLeast2C }}
            </div>
            <div *ngIf="employeeForm.controls.userName.errors.pattern">
              {{ notspace }}
            </div>
          </div>
        </div>
        <div class="form-group mb-4">
          <label for="email" class="title-input"><span class="color-red">*</span> Email </label>
          <input formControlName="email" type="email" [ngClass]="{
              'is-invalid': submitted && employeeForm.controls.email.errors
            }" minlength="4" maxlength="50" class="form-control" placeholder="VD: abcd@gmail.com" />
          <div *ngIf="submitted && employeeForm.controls.email.errors" class="text-danger">
            <div *ngIf="employeeForm.controls.email.errors.required">
              {{ isEmpty }}
            </div>
            <div *ngIf="employeeForm.controls.email.errors.minlength">
              {{ atLeast4C }}
            </div>
            <div *ngIf="employeeForm.controls.email.errors.email">
              {{ isEmail }}
            </div>
          </div>
        </div>
        <div class="form-group mb-4">
          <label for="identifyNumber" class="title-input"><span class="color-red">*</span> CCCD </label>
          <input formControlName="identifyNumber" type="text" [ngClass]="{
              'is-invalid':
                submitted && employeeForm.controls.identifyNumber.errors
            }" class="form-control" minlength="9" maxlength="15" placeholder="VD: 1234567899" />
          <div *ngIf="submitted && employeeForm.controls.identifyNumber.errors" class="text-danger">
            <div *ngIf="employeeForm.controls.identifyNumber.errors.required" >
              {{isEmpty}}
            </div>
            <div *ngIf="employeeForm.controls.identifyNumber.errors.pattern" >
              {{isNum}}
            </div>
            <div *ngIf="employeeForm.controls.identifyNumber.errors.minlength">
              {{atLeast12C}}
            </div>
          </div>
        </div>
        <div class="form-group mb-4">
          <label for="phoneNumber" class="title-input"><span class="color-red">*</span> Số Điện Thoại </label>
          <input formControlName="phoneNumber" type="text" [ngClass]="{
              'is-invalid': submitted && employeeForm.controls.phoneNumber.errors
            }" minlength="10" maxlength="11" class="form-control" placeholder="VD: 0813444555" />
          <div *ngIf="submitted && employeeForm.controls.phoneNumber.errors" class="text-danger">
            <div *ngIf="employeeForm.controls.phoneNumber.errors.required">
              {{ isEmpty }}
            </div>
            <div *ngIf="employeeForm.controls.phoneNumber.errors.pattern" >
              {{isNum}}
            </div>
            <div *ngIf="employeeForm.controls.phoneNumber.errors.minlength">
              {{ atLeast10C }}
            </div>
  
          </div>
        </div>
        <div class="form-group mb-4">
          <label for="dateOfBirth" class="title-input"><span class="color-red">*</span> Ngày Sinh </label>
          <input formControlName="dateOfBirth" type="date" max="{{defaultCheckYears}}" [ngClass]="{
              'is-invalid': submitted && employeeForm.controls.dateOfBirth.errors
            }" class="form-control" />
          <div *ngIf="submitted && employeeForm.controls.dateOfBirth.errors" class="text-danger">
            <div *ngIf="employeeForm.controls.dateOfBirth.errors.required">
              {{ isEmpty }}
            </div>
          </div>
        </div>
        <div class="form-group mb-5">
          <label for="role" class="title-input"><span class="color-red">*</span> Vai Trò </label>
          <select formControlName="role" [ngClass]="{
              'is-invalid': submitted && employeeForm.controls.role.errors
            }" class="form-select" id="inputGroupSelect01">
            
            <option *ngFor="let d of department" value="{{ d.departmentID }}">
              {{ d.departmentName }}
            </option>
          </select>
          <div *ngIf="submitted && employeeForm.controls.role.errors" class="text-danger">
            <div *ngIf="employeeForm.controls.role.errors.required">
              {{ isEmpty }}
            </div>
          </div>
        </div>
  
        <div class="btn-dele-sub text-end">
          <button class="fw-bold btn px-4 py-2" (click)="cancelForm()" >
            <i class="pi pi-times"></i> Huỷ
          </button>
          <button class="fm-btn-y" type="submit">Tạo</button>
        </div>
      </form>
    </div>
  </div>
</main>